# Reusable Signed Commits Check workflow
# Enforces DCO/signed commits on pull requests
#
# Usage in consuming repo:
#   name: Check Signed Commits
#   on: pull_request_target
#   jobs:
#     signed-commits:
#       uses: llm-d/llm-d-infra/.github/workflows/reusable-signed-commits.yml@main
#       permissions:
#         contents: read
#         pull-requests: write

name: Signed Commits Check (Reusable)

on:
  workflow_call:

permissions:
  contents: read
  pull-requests: write

jobs:
  check-signed-commits:
    name: Check signed commits in PR
    runs-on: ubuntu-latest
    steps:
      - name: Check signed commits in PR
        uses: 1Password/check-signed-commits-action@v1
        with:
          comment: |
            Unsigned commits detected! Please sign your commits.

            For instructions on how to set up GPG/SSH signing and verify your commits, please see [GitHub Documentation](https://docs.github.com/en/authentication/managing-commit-signature-verification).
